@using TLTY.Areas.Admin.Models
@{
	var session = (UserLogin)Session[Constants.USER_SESSION];
	if (session == null)
	{
		Response.Redirect("~/Admin/Login");
	}
}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<title>@ViewBag.Title</title>
	@Styles.Render("~/Content/Admin/css")
	@Scripts.Render("~/bundles/Admin/modernizr")
	<style>
		td.center {
			margin: 0 auto;
			position: relative;
		}

			td.center img {
				width: 40px;
				height: 40px;
				margin: auto;
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				-moz-border-radius: 10px;
				-webkit-border-radius: 10px;
			}

		.modal, .modal-dialog {
			border-color: #337ab7;
		}

		.modal-header {
			color: #fff;
			padding: 9px 15px;
			border-bottom: 1px solid #eee;
			background-color: #428bca;
			-webkit-border-top-left-radius: 5px;
			-webkit-border-top-right-radius: 5px;
			-moz-border-radius-topleft: 5px;
			-moz-border-radius-topright: 5px;
			-ms-border-top-left-radius: 5px;
			border-top-left-radius: 5px;
			-ms-border-top-right-radius: 5px;
			border-top-right-radius: 5px;
		}

		#AlertBox {
			background: #f8f8f8;
		}

		#closeelement {
			position: fixed;
			z-index: 9999999;
			bottom: 0;
			padding: 15px;
			background: #521a61 linear-gradient(55.93deg, purple 0, navy 100%);
			color: #fff;
			width: 90%;
			max-width: 90%;
			font: 400 18px Roboto;
			text-align: center;
			-webkit-box-sizing: border-box;
			-moz-box-sizing: border-box;
			box-sizing: border-box;
			letter-spacing: -.5px;
			margin-left: 5%;
			margin-right: 5%;
		}

			#closeelement a {
				/*background: rgba(0,0,0,.1);*/
				color: #fff;
				padding: 15px 15px;
				position: absolute;
				right: -5px;
				top: -10px;
			}

		div.guestwarn {
			background: #521a61 linear-gradient(55.93deg, purple 0, navy 100%);
			color: #fff;
			width: 290px;
			max-width: 290px;
			min-height: 18px;
			right: 2%;
			bottom: 55%;
			padding: 10px 15px;
			position: fixed;
			z-index: 10;
			font-size: 16px;
			-moz-filter: alpha(opacity=88);
			-o-filter: alpha(opacity=88);
			filter: alpha(opacity=88);
			-moz-opacity: .88;
			-ms-opacity: .88;
			opacity: .88;
		}

		.close {
			float: right;
			width: 22px;
			height: 22px;
		}

		.hide-bullets {
			list-style: none;
			margin-left: -40px;
			margin-top: 20px;
		}

		.thumbnail {
			padding: 0;
		}

			.thumbnail img {
				height: 50px;
			}

		.carousel-inner > .item > img, .carousel-inner > .item > a > img {
			width: 100%;
			height: 300px;
		}
	</style>
</head>
<body class="body-content">
	<div id="wrapper">
		@Html.Partial("_Nav")
		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					@if (IsSectionDefined("header"))
					{
						@RenderSection("header", required: true)
					}
					else
					{
						<h1 class="page-header">Admin</h1>
					}
				</div>
			</div>
			<div class="row">
				@RenderBody()
			</div>
		</div>
	</div>
	<div id="thongbao" style="display: none">
		<div class="guestwarn">
			<a class="close" onclick="closeBox('thongbao'); return false;" title="Đóng thông báo này"><i class="fa fa-times" style="color: #fff"></i></a>
			<div class="abc"></div>
		</div>
	</div>
	@if (TempData["AlertMessage"] != null)
	{
		<div id="AlertBox" hide>
			<!-- class="alert TempData["AlertType"]"-->
			<div id='closeelement'>
				<a href='javascript:closeelement();' title="Nhấn để tắt thông báo"><i class='fa fa-times'></i></a>
				@Html.Raw(TempData["AlertMessage"])
				<br />
			</div>
		</div>
	}
	<!-- jQuery -->
	@Scripts.Render("~/bundles/Admin/jquery")
	<script src="~/Content/AdminTheme/tool/ckeditor/ckeditor.js"></script>
	<script src="~/Content/AdminTheme/tool/ckfinder/ckfinder.js"></script>
	@Scripts.Render("~/bundles/Admin/bootstrap")

	<script>
		$(document).ready(function () {
			$('#dataTables-example').DataTable({
				responsive: true
			});
		});
	</script>
	<script>
		function closeelement() {
			var div = document.getElementById('closeelement');
			div.style.display = 'none';
		}

		//setTimeout(closeelement, 5000);
		$('#closeelement').delay(9000).slideUp(1500);

		function closeBox() {
			var div = document.getElementById('thongbao');
			div.style.display = 'none';
		}

		setTimeout(closeBox, 9000);
	</script>
<script>
	setInterval(function() {
		var request = {
			init: function () {
				request.loadrequest();
			},
			loadrequest: function () {
				$.ajax({
					url: '/Admin/Home/RequestMe',
					type: 'GET',
					dataType: 'json',
					success: function (response) {
						var datar = response.data;
						var html = '';
						$.each(datar, function (j, jtem) {
							$('#soluongr').html(' ' + response.count + ' ');
							html += '<li><a href="/Admin/Requests/Details/"  title="Xem chi tiết ' + jtem.Name + '" class="detail-link"><div><i class="fa fa-comment fa-fw"></i>' + jtem.Name + '<span class="pull-right text-muted small">' + jtem.Name + '</span></div></a></li>';
						});
						html += '<li class="divider"></li><li><a class="text-center" href="/Admin/Requests"><strong>Xem toàn bộ </strong><i class="fa fa-angle-right"></i></a></li>';
						$('#request').html(html);
					}
				});
			}
		}
		request.init();
	}, 1000);
	

</script>

	<script>
		setInterval(function () {
			var feedback = {
				init: function () {
					feedback.loadfeedback();
				},
				loadfeedback: function () {
					$.ajax({
						url: '/Admin/Home/FeedbackMe',
						type: 'GET',
						dataType: 'json',
						success: function (response) {
							var data = response.data;
							var html = '';
							$.each(data, function (i, item) {
								var d = item.CreateDate;
								$('#soluongf').html(' ' + response.count + ' ');
								html += '<li><a href="/Admin/Feedbacks/Details/' + item.ID + '"  title="Xem chi tiết ' + item.Name + '" class="detail-link"><div><strong>' + item.Name + '</strong><span class="pull-right text-muted"><em>' + d + '</em></span></div><div>' + item.Description + '</div></a></li>';
							});
							html += '<li class="divider"></li><li><a class="text-center" href="/Admin/Feedbacks"><strong>Xem toàn bộ </strong><i class="fa fa-angle-right"></i></a></li>';
							$('#feedback').html(html);
						}
					});
				}
			}
			feedback.init();
		}, 1000);

	</script>

	<script>
		$(document).ready(function () {
			$("html").niceScroll();
		});
	</script>
	@RenderSection("scripts", required: false)
</body>
</html>